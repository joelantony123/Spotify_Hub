{% load static %}
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Profile - Spotify Hub</title>

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/bootstrap.css' %}" />
    <!-- Custom styles -->
    <link href="{% static 'assets/css/style.css' %}" rel="stylesheet" />
    <!-- Responsive style -->
    <link href="{% static 'assets/css/responsive.css' %}" rel="stylesheet" />

      <!-- font awesome style -->
      <link href="{% static 'assets/css/font-awesome.min.css' %}" rel="stylesheet" />

      <!-- Custom styles for this template -->
      <link href="{% static 'assets/css/style.css' %}" rel="stylesheet" />
      <!-- responsive style -->
      <link href="{% static 'assets/css/responsive.css' %}" rel="stylesheet" />

    <style>
      body {
        background-image: url("{% static 'assets/images/hero-bg.jpg' %}");
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
      }
      .edit-profile-section {
        padding: 100px 0;
        background-color: #ffffff;
        color: #ffffff;
      }
      .edit-profile-container {
        background-color: #ffffff;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
      }
      .edit-profile-heading {
        color: #ffbe33;
        margin-bottom: 30px;
      }
      .form-control {
        margin-bottom: 20px;
      }
      .btn-submit {
        background-color: #ffbe33;
        color: #ffffff;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s ease;
      }
      .btn-submit:hover {
        background-color: #e69c00;
      }
    </style>
  </head>
  <body>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>


    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <!-- Site Metas -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link
      rel="shortcut icon"
      href="{% static 'assets/images/favicon.png' %}"
      type=""
    />

    <title>Feane</title>

    <!-- bootstrap core css -->
    <link
      rel="stylesheet"
      type="text/css"
      href="{% static 'assets/css/bootstrap.css' %}"
    />

    <!--owl slider stylesheet -->
    <link
      rel="stylesheet"
      type="text/css"
      href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"
    />
    <!-- nice select  -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css"
      integrity="sha512-CruCP+TD3yXzlvvijET8wV5WxxEh5H8P4cmz0RFbKK6FlZ2sYl3AEsKlLPHbniXKSrDdFewhbmBK5skbdsASbQ=="
      crossorigin="anonymous"
    />

    <style>
        /* ... (previous styles) ... */
        .error-message {
          color: #ff0000;
          font-size: 0.9em;
          margin-top: -15px;
          margin-bottom: 15px;
        }
      </style>

    <div class="hero_area">
      <div class="bg-box">
        <img src="{% static 'assets/images/@hero-bg.jpg' %}" alt="" />
      </div>
    <div class="hero_area" style="background-color: rgba(12, 12, 12, 0.5)">
      <!-- header section starts -->
      <header class="header_section" >
        <div class="container" style="color: #ffbe33;">
          <nav class="navbar navbar-expand-lg custom_nav-container">
            <a class="navbar-brand" href="{% url 'home' %}">
                <span style="color: #ffbe33;"> Spotify Hub </span>
              </a>
  
              <button
                class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent"
                aria-expanded="false"
                aria-label="Toggle navigation"
              >
                <span class=""> </span>
              </button>
  
              <div class="collapse navbar-collapse" id="navbarSupportedContent" style="color: #ffbe33;">
                <ul class="navbar-nav mx-auto">
                  <li class="nav-item active">
                    <a class="nav-link" href="#" style="color: #ffbe33;">Home <span class="sr-only">(current)</span></a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#categories-section" style="color: #ffbe33;">Categories</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#about" style="color: #ffbe33;">About</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="#contact" style="color: #ffbe33;">Contact</a>
                  </li>
                  <li class="nav-item dropdown">
                      <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false" style="color: #ffbe33;">
                          Profile
                      </a>
                      <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                          <li><a class="dropdown-item" href="{% url 'edit_profile'  %}">
                              <strong ></strong> Edit Profile
                          </a></li>
                          <li><hr class="dropdown-divider"></li>
                          <li><a class="dropdown-item" href="#">
                              <strong>Name</strong> {{ customer.name }}
                          </a></li>
                          <li><a class="dropdown-item" href="#">
                              <strong>Email:</strong> {{ customer.email }}
                          </a></li>
                          <li><a class="dropdown-item" href="#">
                              <strong>Phone:</strong> {{ customer.phone }}
                          </a></li>
                          <li><a class="dropdown-item" href="#">
                              <strong>Address:</strong> {{ customer.address }}
                          </a></li>
                      </ul>
                  </li>
                  <li class="nav-item">
                      <a class="nav-link" href="{% url 'logout' %}" style="color: #ffbe33;">Logout</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" href="{% url 'home' %}">
                        <button class="btn" style="background-color: #ffbe33; color: #ffffff; border: none; padding: 8px 15px; border-radius: 5px;">
                            <i class="fa fa-home"></i> Back to Home
                        </button>
                    </a>
                  </li>
                </ul>
                <div class="user_option">
                   <a href="" class="user_link"> 
                  </a>
                  
                </div>
              </div
          </nav>
        </div>
      </header>
      <!-- end header section -->
    </div>

    <!-- edit profile section -->
    <section class="edit-profile-section layout_padding" style="background-color: rgba(255, 255, 255, 0.5); backdrop-filter: blur(5px);">
      <div class="container" >
        <div class="row">
          <div class="col-md-8 offset-md-2">
            <div class="edit-profile-container" style="background-color: rgba(255, 255, 255, 0.5); backdrop-filter: blur(5px);">
              <h2 class="edit-profile-heading text-center" style="color: #050505;">Edit Your Profile</h2>
              <form action="{% url 'edit_profile' %}" method="post" id="editProfileForm">
                {% csrf_token %}
                <div class="form-group">
                  <label for="name" style="color: #000000;">Name</label>
                  <input type="text" class="form-control" id="name" name="name" value="{{ customer.name }}" required minlength="2">
                  <div class="error-message" id="nameError"></div>
                </div>
                <div class="form-group">
                  <label for="email" style="color: #000000;">Email</label>
                  <input type="email" class="form-control" id="email" name="email" value="{{ customer.email }}" required>
                  <div class="error-message" id="emailError"></div>
                </div>
                <div class="form-group">
                  <label for="phone" style="color: #000000;">Phone</label>
                  <input type="tel" class="form-control" id="phone" name="phone" value="{{ customer.phone }}" required pattern="^\+?1?\d{9,15}$">
                  <div class="error-message" id="phoneError"></div>
                </div>
                <div class="form-group">
                  <label for="address" style="color: #000000;">Address</label>
                  <textarea class="form-control" id="address" name="address" rows="3" required minlength="5">{{ customer.address }}</textarea>
                  <div class="error-message" id="addressError"></div>
                </div>
                <div class="form-group">
                  <label for="address" style="color: #000000;">Address</label>
                  <textarea class="form-control" id="address" name="address" rows="3" required minlength="5">{{ customer.address }}</textarea>
                  <div class="error-message" id="addressError"></div>
                </div>
                <div class="form-group">
                    <label for="pincode">Pincode</label>
                    <input type="text" 
                           class="form-control" 
                           id="pincode" 
                           name="pincode" 
                           value="{{ customer.pincode }}"
                           pattern="[0-9]{6}" 
                           maxlength="6" 
                           title="Please enter a valid 6-digit pincode"
                           oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0, 6)"
                           required>
                    <div class="error-message" id="pincodeError"></div>
                </div>

                <div class="text-center">
                  <button type="submit" class="btn btn-submit">Save Changes</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- end edit profile section -->

    <!-- footer section -->
    <footer class="footer_section">
      <div class="container">
        <!-- Add your footer content here -->
      </div>
    </footer>
    <!-- end footer section -->

    <!-- JavaScript -->
    <script src="{% static 'assets/js/jquery-3.4.1.min.js' %}"></script>
    <script src="{% static 'assets/js/bootstrap.js' %}"></script>
    <script src="{% static 'assets/js/custom.js' %}"></script>
    <script>
            document.getElementById('editProfileForm').addEventListener('submit', function(event) {
              let isValid = true;
              
              // Name validation
              const name = document.getElementById('name');
              if (name.value.length < 2) {
                document.getElementById('nameError').textContent = "Name must be at least 2 characters long.";
                isValid = false;
              } else {
                document.getElementById('nameError').textContent = "";
              }
      
              // Email validation
              const email = document.getElementById('email');
              const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
              if (!emailRegex.test(email.value)) {
                document.getElementById('emailError').textContent = "Please enter a valid email address.";
                isValid = false;
              } else {
                document.getElementById('emailError').textContent = "";
              }
      
              // Phone validation
              const phone = document.getElementById('phone');
              const phoneRegex = /^\+?1?\d{9,15}$/;
              if (!phoneRegex.test(phone.value)) {
                document.getElementById('phoneError').textContent = "Please enter a valid phone number.";
                isValid = false;
              } else {
                document.getElementById('phoneError').textContent = "";
              }
      
              // Address validation
              const address = document.getElementById('address');
              if (address.value.length < 5) {
                document.getElementById('addressError').textContent = "Address must be at least 5 characters long.";
                isValid = false;
              } else {
                document.getElementById('addressError').textContent = "";
              }
      
              // Pincode validation
              const pincode = document.getElementById('pincode');
              if (!pincode.value.match(/^[0-9]{6}$/)) {
                document.getElementById('pincodeError').textContent = "Please enter a valid 6-digit pincode.";
                isValid = false;
              } else {
                document.getElementById('pincodeError').textContent = "";
              }
      
              if (!isValid) {
                event.preventDefault();
              }
            });
          </script>
  </body>
</html>
{% load static %}
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home</title>

    <!-- Basic -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <!-- Mobile Metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <!-- Site Metas -->
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <link rel="shortcut icon" href="{% static 'assets/images/favicon.png' %}" type="" />

    <title>Feane</title>

    <!-- bootstrap core css -->
    <link rel="stylesheet" type="text/css" href="{% static 'assets/css/bootstrap.css' %}" />

    <!--owl slider stylesheet -->
    <link rel="stylesheet" type="text/css"
        href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css" />
    <!-- nice select  -->
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/css/nice-select.min.css"
        integrity="sha512-CruCP+TD3yXzlvvijET8wV5WxxEh5H8P4cmz0RFbKK6FlZ2sYl3AEsKlLPHbniXKSrDdFewhbmBK5skbdsASbQ=="
        crossorigin="anonymous" />
    <!-- font awesome style -->
    <link href="{% static 'assets/css/font-awesome.min.css' %}" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" rel="stylesheet" />

    <!-- Custom styles for this template -->
    <link href="{% static 'assets/css/style.css' %}" rel="stylesheet" />
    <!-- responsive style -->
    <link href="{% static 'assets/css/responsive.css' %}" rel="stylesheet" />
    <style>
        body {
            background: url("{% static 'assets/images/hero-bg.jpg' %}") no-repeat center center fixed;
            background-size: cover;
            position: relative;
            min-height: 100vh;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6); /* Dark overlay */
            z-index: -1;
        }

        .hero_area {
            position: relative;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background: transparent; /* Remove previous background */
        }

        .heading_container.heading_center {
            -webkit-box-align: center;
            -ms-flex-align: center;
            align-items: center;
            padding-top: 35px;
            text-align: center;
        }

        #profile {
            display: none;
            /* Hide profile section by default */
        }

        .dropdown-menu {
            padding: 10px;
            min-width: 200px;
            box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        }

        .dropdown-item {
            padding: 8px 10px;
            color: #333;
            transition: background-color 0.2s ease;
        }

        .dropdown-item:hover {
            background-color: #f8f9fa;
        }

        .dropdown-divider {
            margin: 0.5rem 0;
        }

        .dropdown-item strong {
            display: inline-block;
            width: 70px;
            font-weight: 600;
        }

        .box {
            position: relative;
            margin-top: 25px;
            background-color: #ffffff;
            border-radius: 15px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .box:hover {
            transform: translateY(-5px);
        }

        .img-box {
            position: relative;
            padding: 20px;
            height: 220px;
            overflow: hidden;
            border-radius: 15px 15px 0 0;
        }

        .img-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }

        .box:hover .img-box img {
            transform: scale(1.1);
        }

        .detail-box {
            text-align: center;
            padding: 20px;
        }

        .detail-box h1 {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            color: #ffffff; /* Keep heading white */
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .detail-box p {
            font-size: 1.1rem;
            margin-bottom: 30px;
            color: #ffffff; /* Changed to white text color */
            font-weight: 500;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5); /* Dark text shadow for better readability */
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
        }

        @media (max-width: 768px) {
            .detail-box h1 {
                font-size: 2.5rem;
            }

            .detail-box p {
                font-size: 1rem;
            }
        }

        .options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        .options h6 {
            font-size: 18px;
            color: #222831;
            margin: 0;
        }

        .add-to-cart {
            background-color: #ffbe33;
            color: #ffffff;
            border: none;
            padding: 8px 15px;
            border-radius: 25px;
            font-size: 14px;
            transition: background-color 0.3s ease;
        }

        .add-to-cart:hover {
            background-color: #e69c00;
        }

        .filters_menu {
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            list-style: none;
            margin: 45px 0 20px 0;
        }

        .filters_menu li {
            padding: 7px 25px;
            cursor: pointer;
            border-radius: 25px;
            margin: 5px;
            color: #222831;
            transition: all 0.3s ease-in-out;
        }

        .filters_menu li.active,
        .filters_menu li:hover {
            background-color: #222831;
            color: #ffffff;
        }

        /* Alert Messages */
        .alert {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            min-width: 300px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .box {
                margin: 15px 10px;
            }

            .img-box {
                height: 180px;
            }

            .filters_menu li {
                padding: 5px 15px;
                font-size: 14px;
            }
        }

        /* Header Section Styles */
        .header_section {
            padding: 15px 0;
            background: rgba(0, 0, 0, 0.6); /* Semi-transparent black background */
        }

        /* Navbar Styles */
        .custom_nav-container {
            padding: 0;
        }

        .navbar-brand {
            color: #ffffff !important;
            font-weight: bold;
            font-size: 28px;
        }

        .navbar-brand span {
            color: #ffbe33;
        }

        .custom_nav-container .navbar-nav .nav-link {
            color: #ffffff;
            text-align: center;
            padding: 10px 25px;
            transition: all 0.3s ease;
        }

        .custom_nav-container .navbar-nav .nav-link:hover,
        .custom_nav-container .navbar-nav .nav-item.active .nav-link {
            color: #ffbe33;
        }

        /* Slider Section Styles */
        .slider_section {
            flex: 1;
            display: flex;
            align-items: center;
            padding: 45px 0;
        }

        .slider_section .detail-box {
            color: #ffffff;
        }

        .slider_section .detail-box h1 {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .slider_section .detail-box p {
            font-size: 1.1rem;
            margin-bottom: 30px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .slider_section .btn-box .btn1 {
            display: inline-block;
            padding: 12px 35px;
            background-color: #ffbe33;
            color: #ffffff;
            border-radius: 25px;
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .slider_section .btn-box .btn1:hover {
            background-color: #e69c00;
            transform: translateY(-2px);
        }

        /* Responsive Styles */
        @media (max-width: 768px) {
            .slider_section .detail-box h1 {
                font-size: 2.5rem;
            }

            .slider_section .detail-box p {
                font-size: 1rem;
            }

            .slider_section {
                padding: 30px 0;
            }
        }

        .food_section,
        .book_section,
        .client_section {
            background: #ffffff;
            position: relative;
            z-index: 1;
            padding: 45px 0;
        }

        .footer_section {
            background: #222831;
            position: relative;
            z-index: 1;
        }

        .filters-content {
            max-width: 1800px;
            margin: 0 auto;
            padding: 0 15px;
        }

        .col-sm-12.col-md-4 {
            flex: 0 0 100%;
            max-width: 100%;
            padding: 15px;
        }

        .box {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }

        .img-box {
            width: 100%;
            height: 500px;
            overflow: hidden;
        }

        .img-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .detail-box {
            padding: 30px 40px;
        }

        .detail-box h5 {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .detail-box p {
            font-size: 1.3rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .options h6 {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .btn-primary {
            padding: 15px 40px;
            font-size: 1.3rem;
        }

        @media (min-width: 1600px) {
            .col-sm-12.col-md-4 {
                flex: 0 0 33.333%;
                max-width: 33.333%;
            }
        }

        @media (max-width: 1599px) {
            .filters-content {
                max-width: 1400px;
            }
            .box {
                max-width: 500px;
            }
        }

        @media (max-width: 768px) {
            .box {
                max-width: 100%;
                margin-bottom: 20px;
            }
            .img-box {
                height: 250px;
            }
        }

        .col-sm-12.col-md-4 {
            flex: 0 0 50%;
            max-width: 50%;
            padding: 15px;
        }

        .box {
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 15px rgba(0,0,0,0.1);
        }

        .img-box {
            width: 100%;
            height: 400px;
            overflow: hidden;
        }

        .img-box img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .detail-box {
            padding: 30px;
        }

        .detail-box h5 {
            font-size: 1.8rem;
            margin-bottom: 20px;
        }

        .detail-box p {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
        }

        .options h6 {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .btn-primary {
            padding: 12px 30px;
            font-size: 1.2rem;
        }

        /* Responsive adjustments */
        @media (max-width: 1200px) {
            .col-sm-12.col-md-4 {
                flex: 0 0 100%;
                max-width: 100%;
            }
        }

        .chat-widget {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }

        .chat-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            margin: 5px;
            cursor: pointer;
            position: relative;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }

        .chat-button.ai-chat {
            background-color: #007bff;
            color: white;
        }

        .chat-button.admin-chat {
            background-color: #28a745;
            color: white;
        }

        .chat-window {
            display: none;
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            padding: 15px;
            background: #4285f4;
            color: white;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 15px;
        }

        .message {
            margin: 10px;
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 80%;
            word-wrap: break-word;
            position: relative;
        }

        .message .timestamp {
            font-size: 0.7em;
            color: #666;
            margin-top: 4px;
            text-align: right;
            opacity: 0.8;
        }

        .message.sent {
            background-color: #e3f2fd;
            margin-left: auto;
        }

        .message.received {
            background-color: #f5f5f5;
            margin-right: auto;
        }

        .message.error {
            background-color: #ffe6e6;
            color: #dc3545;
        }

        .chat-input {
            padding: 15px;
            border-top: 1px solid #eee;
        }

        .close-btn {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            min-width: 20px;
            height: 20px;
            border-radius: 10px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .search-container {
            position: relative;
            z-index: 1;
        }

        .search-container input {
            padding: 10px 20px;
            font-size: 16px;
            border: 1px solid #ddd;
            transition: all 0.3s ease;
        }

        .search-container input:focus {
            box-shadow: 0 0 15px rgba(255, 190, 51, 0.2);
            border-color: #ffbe33;
        }

        .search-container button {
            padding: 10px 20px;
            transition: all 0.3s ease;
        }

        .search-container button:hover {
            background-color: #e69c00 !important;
            border-color: #e69c00 !important;
        }

        @media (max-width: 768px) {
            .search-container {
                padding: 0 15px;
            }
            
            .search-container input {
                font-size: 14px;
            }
        }

        .product-item {
            margin-bottom: 30px;
        }

        .box {
            background-color: #ffffff;
            border-radius: 15px;
            overflow: hidden;
            height: 100%;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
        }

        .box:hover {
            transform: translateY(-5px);
        }

        .img-box {
            padding: 20px;
            height: 220px;
            overflow: hidden;
        }

        .img-box img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            transition: transform 0.3s ease;
        }

        .box:hover .img-box img {
            transform: scale(1.1);
        }

        .detail-box {
            padding: 20px;
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .detail-box h5 {
            font-size: 1.2rem;
            margin-bottom: 10px;
            color: #222831;
        }

        .detail-box p {
            flex: 1;
            color: #666666;
            margin-bottom: 15px;
        }

        .options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 15px;
            border-top: 1px solid #eee;
            margin-top: auto;
        }

        .options h6 {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .product-container.loading {
            opacity: 0.6;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }

        .filters_menu li {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filters_menu li.active {
            background-color: #ffbe33;
            color: #ffffff;
        }

        .product-item {
            transition: all 0.3s ease;
        }

        .typing-indicator {
            background-color: #f1f0f0 !important;
            padding: 15px !important;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dots span {
            width: 8px;
            height: 8px;
            background: #666;
            border-radius: 50%;
            animation: typing 1s infinite ease-in-out;
        }

        .typing-dots span:nth-child(1) { animation-delay: 0.1s; }
        .typing-dots span:nth-child(2) { animation-delay: 0.2s; }
        .typing-dots span:nth-child(3) { animation-delay: 0.3s; }

        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        #aiChatWindow {
            display: none;
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            flex-direction: column;
        }

        #aiChatWindow.active {
            display: flex;
        }

        .message.error {
            background-color: #ffe6e6;
            color: #dc3545;
        }

        .message.sent {
            background-color: #007bff;
            color: white;
            margin-left: auto;
            border-radius: 15px 15px 0 15px;
        }

        .message.received {
            background-color: #f1f0f0;
            color: #333;
            margin-right: auto;
            border-radius: 15px 15px 15px 0;
        }

        .message .timestamp {
            font-size: 0.7em;
            opacity: 0.7;
            margin-top: 5px;
        }

        #aiChatWindow .chat-input {
            padding: 10px;
            border-top: 1px solid #eee;
        }

        #aiChatWindow .input-group {
            margin-bottom: 0;
        }

        #aiMessageInput {
            border-radius: 20px 0 0 20px;
            padding: 10px 15px;
        }

        #aiChatWindow .btn-primary {
            border-radius: 0 20px 20px 0;
            padding: 0 15px;
        }

        .chat-messages {
            padding: 15px;
            overflow-y: auto;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .profile-card {
            background: #fff;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 300px;
            margin: 10px auto;
        }

        .profile-card .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .profile-card .profile-avatar {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: #ffc107;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
        }

        .profile-card .profile-avatar i {
            font-size: 20px;
            color: white;
        }

        .profile-card .profile-info {
            flex: 1;
        }

        .profile-card .profile-name {
            font-size: 1.2em;
            font-weight: 600;
            color: #333;
            margin: 0;
        }

        .profile-card .profile-detail {
            display: flex;
            align-items: center;
            padding: 8px 0;
            color: #555;
            font-size: 0.95em;
            word-break: break-word;
        }

        .profile-card .profile-detail i {
            width: 20px;
            margin-right: 12px;
            color: #2196F3;
            font-size: 16px;
            text-align: center;
        }

        .profile-card .profile-detail:last-child {
            margin-bottom: 0;
        }

        /* Adjust the message container for profile card */
        .message.received .profile-card {
            background: #fff;
            margin: 0;
            color: #333;
        }
    </style>
</head>

<body>

    

    <div class="hero_area">
        <!-- header section strats -->
        <header class="header_section">
            <div class="container">
                <nav class="navbar navbar-expand-lg custom_nav-container">
                    <a class="navbar-brand" href="{% url 'home' %}">
                        <span> Spotify Hub </span>
                    </a>

                    <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                        aria-expanded="false" aria-label="Toggle navigation">
                        <span class=""> </span>
                    </button>

                    <div class="collapse navbar-collapse" id="navbarSupportedContent">
                        <ul class="navbar-nav mx-auto">
                            <li class="nav-item active">
                                <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#categories-section">Product</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#about">About</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#contact">Contact</a>
                            </li>   
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button"
                                    data-bs-toggle="dropdown" aria-expanded="false">
                                    Profile
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
                                    <li><a class="dropdown-item" href="{% url 'edit_profile'  %}">
                                            <strong></strong> Edit Profile
                                        </a></li>
                                    <li>
                                        <hr class="dropdown-divider">
                                    </li>
                                    <li><a class="dropdown-item" href="#">
                                            <strong>Name</strong> {{ customer.name }}
                                        </a></li>
                                    <li><a class="dropdown-item" href="#">
                                            <strong>Email:</strong> {{ customer.email }}
                                        </a></li>
                                    <li><a class="dropdown-item" href="#">
                                            <strong>Phone:</strong> {{ customer.phone }}
                                        </a></li>
                                    <li><a class="dropdown-item" href="#">
                                            <strong>Address:</strong> {{ customer.address }}
                                        </a></li>
                                </ul>
                            </li><li class="nav-item">
                                <a class="nav-link" href="{% url 'purchase_history' %}">Purchase History</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="{% url 'logout' %}">Logout</a>
                            </li>
                            
                        </ul>
                        <div class="user_option">
                            <a href="" class="user_link">
                            </a>
                            <a class="cart_link" href="{% url 'cart_view' %}">
                                <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                                    xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                                    viewBox="0 0 456.029 456.029" style="enable-background:new 0 0 456.029 456.029; fill: #ffbe33;"
                                    xml:space="preserve">
                                    <g>
                                        <g>
                                            <path d="M345.6,338.862c-29.184,0-53.248,23.552-53.248,53.248c0,29.184,23.552,53.248,53.248,53.248
                   c29.184,0,53.248-23.552,53.248-53.248C398.336,362.926,374.784,338.862,345.6,338.862z"></path>
                                        </g>
                                    </g>
                                    <g>
                                        <g>
                                            <path d="M439.296,84.91c-1.024,0-2.56-0.512-4.096-0.512H112.64l-5.12-34.304C104.448,27.566,84.992,10.67,61.952,10.67H20.48
                   C9.216,10.67,0,19.886,0,31.15c0,11.264,9.216,20.48,20.48,20.48h41.472c2.56,0,4.608,2.048,5.12,4.608l31.744,216.064
                   c4.096,27.136,27.648,47.616,55.296,47.616h212.992c26.624,0,49.664-18.944,55.296-45.056l33.28-166.4
                   C457.728,97.71,450.56,86.958,439.296,84.91z"></path>
                                        </g>
                                    </g>
                                    <g>
                                        <g>
                                            <path d="M215.04,389.55c-1.024-28.16-24.576-50.688-52.736-50.688c-29.696,1.536-52.224,26.112-51.2,55.296
                   c1.024,28.16,24.064,50.688,52.224,50.688h1.024C193.536,443.31,216.576,418.734,215.04,389.55z">
                                            </path>
                                        </g>
                                    </g>
                                </svg>
                            </a>
                            <form class="form-inline">
                  {% csrf_token %}
                  <button class="btn my-2 my-sm-0 nav_search-btn" type="submit">
 
                  </button>
                </form>
                           
                        </div>
                    </div>
                </nav>
            </div>
        </header>
        <!-- end header section -->
        <!-- slider section -->
        <section class="slider_section">
            <div id="customCarousel1" class="carousel slide" data-ride="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-7 col-lg-6">
                                    <div class="detail-box">
                                        <h1>Multipurpose Sports Store</h1>
                                        <p>
                                            Discover top-quality sports gear in our online store.
                                            From footwear to apparel, we've got everything you need to elevate your
                                            game.
                                            Shop now for unbeatable prices and performance!
                                        </p>
                                        <!-- <div class="btn-box">
                                            <a href="" class="btn1"> Shop Now </a>
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-7 col-lg-6">
                                    <div class="detail-box">
                                        <h1>Multipurpose Sports Store</h1>
                                        <p>
                                            Discover top-quality sports gear in our online store.
                                            From footwear to apparel, we've got everything you need to elevate your
                                            game.
                                            Shop now for unbeatable prices and performance!
                                        </p>
                                        <!-- <div class="btn-box">
                                            <a href="" class="btn1"> Shop Now </a>
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <div class="container">
                            <div class="row">
                                <div class="col-md-7 col-lg-6">
                                    <div class="detail-box">
                                        <h1>Multipurpose Sports Store</h1>
                                        <p>
                                            Discover top-quality sports gear in our online store.
                                            From footwear to apparel, we've got everything you need to elevate your
                                            game.
                                            Shop now for unbeatable prices and performance!
                                        </p>
                                        <!-- <div class="btn-box">
                                            <a href="" class="btn1"> Shop Now </a>
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <ol class="carousel-indicators">
                        <li data-target="#customCarousel1" data-slide-to="0" class="active"></li>
                        <li data-target="#customCarousel1" data-slide-to="1"></li>
                        <li data-target="#customCarousel1" data-slide-to="2"></li>
                    </ol>
                </div>
            </div>
        </section>
        <!-- end slider section -->
    </div>

    <!-- offer section -->

    <!-- <section class="offer_section layout_padding-bottom">
      <div class="offer_container">
        <div class="container">
          <div class="row">
            <div class="col-md-6">
              <div class="box">
                <div class="img-box">
                  <img src="{% static 'assets/images/o1.jpg' %}" alt="" />
                </div>
                <div class="detail-box">
                  <h5>Tasty Thursdays</h5>
                  <h6><span>20%</span> Off</h6>
                  <a href="">
                    Order Now
                    <svg
                      version="1.1"
                      id="Capa_1"
                      xmlns="http://www.w3.org/2000/svg"
                      xmlns:xlink="http://www.w3.org/1999/xlink"
                      x="0px"
                      y="0px"
                      viewBox="0 0 456.029 456.029"
                      style="enable-background:new 0 0 456.029 456.029;"
                      xml:space="preserve"
                    >
                      <g>
                        <g>
                          <path
                            d="M345.6,338.862c-29.184,0-53.248,23.552-53.248,53.248c0,29.184,23.552,53.248,53.248,53.248
                     c29.184,0,53.248-23.552,53.248-53.248C398.336,362.926,374.784,338.862,345.6,338.862z"
                          ></path>
                        </g>
                      </g>
                      <g>
                        <g>
                          <path
                            d="M439.296,84.91c-1.024,0-2.56-0.512-4.096-0.512H112.64l-5.12-34.304C104.448,27.566,84.992,10.67,61.952,10.67H20.48
                     C9.216,10.67,0,19.886,0,31.15c0,11.264,9.216,20.48,20.48,20.48h41.472c2.56,0,4.608,2.048,5.12,4.608l31.744,216.064
                     c4.096,27.136,27.648,47.616,55.296,47.616h212.992c26.624,0,49.664-18.944,55.296-45.056l33.28-166.4
                     C457.728,97.71,450.56,86.958,439.296,84.91z"></path>
                        </g>
                      </g>
                      <g>
                        <g>
                          <path
                            d="M215.04,389.55c-1.024-28.16-24.576-50.688-52.736-50.688c-29.696,1.536-52.224,26.112-51.2,55.296
                     c1.024,28.16,24.064,50.688,52.224,50.688h1.024C193.536,443.31,216.576,418.734,215.04,389.55z"
                          ></path>
                        </g>
                      </g>
                    </svg>
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section> -->

    <!-- end offer section -->

    <!-- food section -->

    <section id="categories-section" class="food_section layout_padding-bottom">
        <div class="container">
            <div class="heading_container heading_center">
                <h2>Our Categories</h2>
                <!-- Add search bar -->
                <div class="search-container mt-4 mb-4">
                    <div class="input-group" style="max-width: 500px; margin: 0 auto;">
                        <input type="text" id="searchInput" class="form-control" placeholder="Search products..." style="border-radius: 25px 0 0 25px;">
                        <button class="btn btn-primary" type="button" id="searchButton" style="border-radius: 0 25px 25px 0; background-color: #ffbe33; border-color: #ffbe33;">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>
                </div>
            </div>

            <ul class="filters_menu">
                <li class="active" data-category="all">All</li>
                <li data-category="cricket">Cricket</li>
                <li data-category="football">Football</li>
                <li data-category="badminton">Badminton</li>
                <li data-category="table_games">Table Games</li>
            </ul>
            <div class="filters-content">
                <div class="row product-container">
                    {% for product in products %}
                    <div class="col-sm-12 col-lg-4 col-md-6 mb-4 product-item" data-category="{{ product.category|lower }}">
                        <a href="{% url 'product_detail' product.id %}">
                            <div class="box">
                                <div class="img-box">
                                    {% if product.image %}
                                    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="img-fluid" />
                                    {% else %}
                                    <img src="{% static 'assets/images/pop.png' %}" alt="{{ product.name }}" class="img-fluid" />
                                    {% endif %}
                                </div>
                                <div class="detail-box">
                                    <h5>
                                        <a href="{% url 'product_detail' product.id %}" class="text-dark text-decoration-none">
                                            {{ product.name }}
                                        </a>
                                    </h5>
                                    <p style="color: #000;">{{ product.description }}</p>
                                    <div class="options">
                                        <h6>₹{{ product.price }}</h6>
                                        <button class="btn btn-primary add-to-cart" data-product-id="{{ product.id }}">
                                            Add to Cart
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="btn-box">
            <!-- <a href=""> View More </a> -->
        </div>
        </div>
    </section>

    <!-- end food section -->

    <!-- about section -->

    <section id="about" class="about_section layout_padding">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <div class="img-box">
                        <img src="{% static 'assets/images/about-img.png' %}" alt="" />
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="detail-box">
                        <div class="heading_container">
                            <h2>We Are Spotify Hub</h2>
                        </div>
                        <p>
                            There are many variations of passages of Lorem Ipsum available,
                            but the majority have suffered alteration in some form, by
                            injected humour, or randomised words which don't look even
                            slightly believable. If you are going to use a passage of Lorem
                            Ipsum, you need to be sure there isn't anything embarrassing
                            hidden in the middle of text. All
                        </p>
                        <!-- <a href="#"> Read More </a> -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- end about section -->

    <!-- book section -->
    <section id="contact" class="book_section layout_padding">
        <div class="container">
            <div class="heading_container">
                <h2>Contact Us</h2>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form_container">
                        <form method="post">
                            {% csrf_token %}
                            <div>
                                <input type="text" class="form-control" placeholder="Your Name" />
                            </div>
                            <div>
                                <input type="text" class="form-control" placeholder="Phone Number" />
                            </div>
                            <div>
                                <input type="email" class="form-control" placeholder="Your Email" />
                            </div>
                            <div>
                                <select class="form-control nice-select wide">
                                    <option value="" disabled="" selected="">
                                        about which category?
                                    </option>
                                    <option value="Cricket">Cricket</option>
                                    <option value="Football">Football</option>
                                    <option value="Badminton">Badminton</option>
                                    <option value="Table games">Table games</option>
                                </select>
                            </div>
                            <div>
                                <input type="date" class="form-control" />
                            </div>
                            <div class="btn_box">
                                <button>Submit</button>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="map_container">
                        <div id="googleMap"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- end book section -->

    <!-- client section -->

    <section class="client_section layout_padding-bottom">
        <div class="container">
            <div class="heading_container heading_center psudo_white_primary mb_45">
                <h2>What Says Our Customers</h2>
            </div>
            <div class="carousel-wrap row">
                <div class="owl-carousel client_owl-carousel">
                    <div class="item">
                        <div class="box">
                            <div class="detail-box">
                                <p>
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed
                                    do eiusmod tempor incididunt ut labore et dolore magna
                                    aliqua. Ut enim ad minim veniam
                                </p>
                                <h6>Moana Michell</h6>
                                <p>magna aliqua</p>
                            </div>
                            <div class="img-box">
                                <img src="{% static 'assets/images/client1.jpg' %}" alt="" class="box-img" />
                            </div>
                        </div>
                    </div>
                    <div class="item">
                        <div class="box">
                            <div class="detail-box">
                                <p>
                                    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed
                                    do eiusmod tempor incididunt ut labore et dolore magna
                                    aliqua. Ut enim ad minim veniam
                                </p>
                                <h6>Mike Hamell</h6>
                                <p>magna aliqua</p>
                            </div>
                            <div class="img-box">
                                <img src="{% static 'assets/images/client2.jpg' %}" alt="" class="box-img" />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- end client section -->

    <!-- footer section -->
    <footer class="footer_section">
        <div class="container">
            <div class="row">
                <div class="col-md-4 footer-col">
                    <div class="footer_contact">
                        <h4>Contact Us</h4>
                        <div class="contact_link_box">
                            <a href="">
                                <i class="fa fa-map-marker" aria-hidden="true"></i>
                                <span> Location </span>
                            </a>
                            <a href="">
                                <i class="fa fa-phone" aria-hidden="true"></i>
                                <span> Call +91 8086729467 </span>
                            </a>
                            <a href="">
                                <i class="fa fa-envelope" aria-hidden="true"></i>
                                <span> spotifyhub83@gmail.com </span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 footer-col">
                    <div class="footer_detail">
                        <a href="" class="footer-logo"> Feane </a>
                        <p>
                            Necessary, making this the first true generator on the Internet.
                            It uses a dictionary of over 200 Latin words, combined with
                        </p>
                        <div class="footer_social">
                            <a href="">
                                <i class="fa fa-facebook" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-twitter" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-linkedin" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-instagram" aria-hidden="true"></i>
                            </a>
                            <a href="">
                                <i class="fa fa-pinterest" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 footer-col">
                    <h4>Opening Hours</h4>
                    <p>Everyday</p>
                    <p>10.00 Am -10.00 Pm</p>
                </div>
            </div>
            <div class="footer-info">
                <p>
                    © <span id="displayYear"></span> All Rights Reserved By
                    <a href="https://html.design/">Free Html Templates</a><br /><br />
                    © <span id="displayYear"></span> Distributed By
                    <a href="https://themewagon.com/" target="_blank">ThemeWagon</a>
                </p>
            </div>
        </div>
    </footer>
    <!-- footer section -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- jQery -->
    <script src="{% static 'assets/js/jquery-3.4.1.min.js' %}"></script>
    <!-- popper js -->
    <script>
        document.addEventListener('click', function (event) {
            var dropdown = document.getElementById('profileDropdown');
            var isClickInside = dropdown.contains(event.target);

            if (!isClickInside) {
                dropdown.classList.remove('show');
            }
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    $(document).ready(function() {
        let searchTimer;
        
        // Category filter handling
        $('.filters_menu li').click(function() {
            const $this = $(this);
            const category = $this.data('category');
            
            // Update active state
            $('.filters_menu li').removeClass('active');
            $this.addClass('active');
            
            // Filter products directly in the DOM
            if (category === 'all') {
                $('.product-item').show();
            } else {
                $('.product-item').each(function() {
                    const productCategory = $(this).data('category');
                    if (productCategory === category) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            }
        });

        // Search functionality
        function performSearch() {
            const searchText = $('#searchInput').val().toLowerCase();
            const activeCategory = $('.filters_menu li.active').data('category');
            
            $('.product-item').each(function() {
                const $item = $(this);
                const productName = $item.find('h5').text().toLowerCase();
                const productDescription = $item.find('.detail-box p').text().toLowerCase();
                const productCategory = $item.data('category');
                
                const matchesSearch = productName.includes(searchText) || 
                                    productDescription.includes(searchText);
                const matchesCategory = activeCategory === 'all' || 
                                      productCategory === activeCategory;
                
                if (matchesSearch && matchesCategory) {
                    $item.show();
                } else {
                    $item.hide();
                }
            });
        }

        // Debounced search
        $('#searchInput').on('keyup', function() {
            clearTimeout(searchTimer);
            searchTimer = setTimeout(performSearch, 300);
        });

        $('#searchButton').on('click', performSearch);

        // Initialize add to cart functionality
        function initializeAddToCart() {
            $('.add-to-cart').click(function(e) {
                e.preventDefault();
                const productId = $(this).data('product-id');
                
                $.ajax({
                    url: '{% url "cart_view" %}',
                    type: 'POST',
                    data: {
                        'product_id': productId,
                        'csrfmiddlewaretoken': '{{ csrf_token }}'
                    },
                    success: function(response) {
                        if (response.status === 'success') {
                            alert(response.message);
                        } else {
                            alert(response.message);
                        }
                    },
                    error: function(xhr, errmsg, err) {
                        console.error('Error:', err);
                        alert('An error occurred. Please try again.');
                    }
                });
            });
        }

        // Initialize add to cart on page load
        initializeAddToCart();
    });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <!-- bootstrap js -->
    <script src="{% static 'assets/js/bootstrap.js' %}"></script>
    <!-- owl slider -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
    <!-- isotope js -->
    <script src="https://unpkg.com/isotope-layout@3.0.4/dist/isotope.pkgd.min.js"></script>
    <!-- nice select -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"></script>
    <!-- custom js -->
    <script src="{% static 'assets/js/custom.js' %}"></script>
    <!-- Google Map -->
    <script
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCh39n5U-4IoWpsVGUHWdqB6puEkhRLdmI&amp;callback=myMap"></script>
    <!-- End Google Map -->

    <!-- Chat Widget -->
    <div class="chat-widget">
        <!-- AI Chatbot Button & Window -->
        <button class="chat-button ai-chat" onclick="toggleAIChat()">
            <i class="fas fa-robot"></i>
        </button>
        
        <div class="chat-window" id="aiChatWindow">
            <div class="chat-header">
                <h5>AI Assistant</h5>
                <button type="button" class="close-btn" onclick="toggleAIChat()">&times;</button>
            </div>
            
            <div class="chat-messages" id="aiChatMessages">
                <div class="message received">
                    Hi! I'm your AI shopping assistant. How can I help you today?
                </div>
            </div>
            
            <div class="chat-input">
                <div class="input-group">
                    <input type="text" class="form-control" id="aiMessageInput" placeholder="Ask me anything...">
                    <button class="btn btn-primary" type="button" onclick="handleSendMessage()">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Admin Chat Button & Window -->
        {% if customer %}
        <button class="chat-button admin-chat" onclick="toggleAdminChat()">
            <i class="fas fa-headset"></i>
            <span class="badge bg-danger" id="adminUnreadBadge" style="display: {% if total_unread > 0 %}block{% else %}none{% endif %}">
                {{ total_unread }}
            </span>
        </button>
        
        <div class="chat-window" id="adminChatWindow">
            <div class="chat-header">
                <h5>Chat with Admin</h5>
                <button class="close-btn" onclick="toggleAdminChat()">&times;</button>
            </div>
            
            <div class="chat-messages" id="adminChatMessages">
                {% for message in messages %}
                <div class="message {% if message.sender.customer_id == current_customer.customer_id %}sent{% else %}received{% endif %}">
                    {{ message.content }}
                    <div class="timestamp">{{ message.timestamp|date:"M d, Y H:i" }}</div>
                </div>
                {% endfor %}
            </div>
            
            <div class="chat-input">
                <form id="adminMessageForm" onsubmit="sendAdminMessage(event)">
                    {% csrf_token %}
                    <div class="input-group">
                        <input type="text" class="form-control" name="message" placeholder="Type your message..." required>
                        <button class="btn btn-primary" type="submit">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
        {% endif %}
    </div>

    <!-- Update the chat section at the bottom -->
    {% if customer %}
        <div class="chat-section">
            {% if chat_users %}
                {% if current_chat_user %}
                    <script>
                        function getMessages() {
                            $.get("{% url 'get_new_messages' user_id=current_chat_user.customer_id %}", function(response) {
                                // Handle response
                            });
                        }
                    </script>
                {% endif %}
            {% endif %}
        </div>
    {% endif %}

    <!-- Update the chat widget JavaScript section -->
    <script>
    let isAIChatActive = false;

    function toggleAIChat() {
        const aiChatWindow = document.getElementById('aiChatWindow');
        isAIChatActive = !isAIChatActive;
        aiChatWindow.style.display = isAIChatActive ? 'flex' : 'none';
        
        // Close admin chat if open
        const adminChatWindow = document.getElementById('adminChatWindow');
        if (adminChatWindow) {
            adminChatWindow.style.display = 'none';
        }
    }

    async function handleSendMessage() {
        const input = document.getElementById('aiMessageInput');
        const message = input.value.trim();
        const chatMessages = document.getElementById('aiChatMessages');
        
        if (message) {
            // Add user message
            const userMessageHtml = `
                <div class="message sent">
                    ${message}
                    <div class="timestamp">${new Date().toLocaleTimeString()}</div>
                </div>
            `;
            chatMessages.insertAdjacentHTML('beforeend', userMessageHtml);
            
            // Clear input and scroll
            input.value = '';
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Show typing indicator
            const typingHtml = `
                <div class="message received typing-indicator" id="typingIndicator">
                    <div class="typing-dots">
                        <span></span><span></span><span></span>
                    </div>
                </div>
            `;
            chatMessages.insertAdjacentHTML('beforeend', typingHtml);
            
            try {
                const response = await fetch('{% url "gemini_chat" %}', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'X-CSRFToken': '{{ csrf_token }}'
                    },
                    body: JSON.stringify({ message: message })
                });
                
                const data = await response.json();
                
                // Remove typing indicator
                const typingIndicator = document.getElementById('typingIndicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
                
                if (data.status === 'success') {
                    let responseHtml = '';
                    
                    // Check if profile data is included in the response
                    if (data.profile_data) {
                        responseHtml = `
                            <div class="message received">
                                <div class="profile-card">
                                    <div class="profile-header">
                                        <div class="profile-avatar">
                                            <i class="fas fa-user"></i>
                                        </div>
                                        <div class="profile-info">
                                            <div class="profile-name">${data.profile_data.name}</div>
                                        </div>
                                    </div>
                                    <div class="profile-detail">
                                        <i class="fas fa-envelope"></i>
                                        <span>${data.profile_data.email}</span>
                                    </div>
                                    <div class="profile-detail">
                                        <i class="fas fa-phone"></i>
                                        <span>${data.profile_data.phone}</span>
                                    </div>
                                    <div class="profile-detail">
                                        <i class="fas fa-map-marker-alt"></i>
                                        <span>${data.profile_data.address}</span>
                                    </div>
                                </div>
                                <div class="timestamp">${new Date().toLocaleTimeString()}</div>
                            </div>
                        `;
                    } else {
                        // Format the response text with proper line breaks
                        const formattedResponse = data.response.replace(/\n/g, '<br>');
                        responseHtml = `
                            <div class="message received">
                                ${formattedResponse}
                                <div class="timestamp">${new Date().toLocaleTimeString()}</div>
                            </div>
                        `;
                    }
                    
                    chatMessages.insertAdjacentHTML('beforeend', responseHtml);
                } else {
                    throw new Error(data.message || 'Failed to get response');
                }
                
            } catch (error) {
                console.error('Error:', error);
                const typingIndicator = document.getElementById('typingIndicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
                
                const errorHtml = `
                    <div class="message error">
                        Sorry, I encountered an error. Please try again.
                        <div class="timestamp">${new Date().toLocaleTimeString()}</div>
                    </div>
                `;
                chatMessages.insertAdjacentHTML('beforeend', errorHtml);
            }
            
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    }

    // Add event listener for Enter key
    document.getElementById('aiMessageInput').addEventListener('keypress', function(event) {
        if (event.key === 'Enter') {
            event.preventDefault();
            handleSendMessage();
        }
    });

    // Admin Chat Functions
    function toggleAdminChat() {
        const adminChatWindow = document.getElementById('adminChatWindow');
        const isVisible = adminChatWindow.style.display === 'flex';
        adminChatWindow.style.display = isVisible ? 'none' : 'flex';
        
        // Close AI chat if open
        const aiChatWindow = document.getElementById('aiChatWindow');
        aiChatWindow.style.display = 'none';
        isAIChatActive = false;
        
        if (!isVisible) {
            loadMessages();
        }
    }

    function sendAdminMessage(event) {
        event.preventDefault();
        const form = document.getElementById('adminMessageForm');
        const input = form.querySelector('input[name="message"]');
        const message = input.value.trim();
        
        if (message) {
            $.ajax({
                type: 'POST',
                url: '{% url "send_chat_message" %}',
                data: {
                    message: message,
                    receiver_id: '{{ chat_users.first.customer_id }}',
                    csrfmiddlewaretoken: '{{ csrf_token }}'
                },
                success: function(response) {
                    if (response.status === 'success') {
                        const messageHtml = `
                            <div class="message sent">
                                ${message}
                                <div class="timestamp">${response.timestamp}</div>
                            </div>
                        `;
                        const chatMessages = document.getElementById('adminChatMessages');
                        chatMessages.insertAdjacentHTML('beforeend', messageHtml);
                        input.value = '';
                        chatMessages.scrollTop = chatMessages.scrollHeight;
                    }
                },
                error: function(xhr, status, error) {
                    console.error('Error sending message:', error);
                    alert('Failed to send message. Please try again.');
                }
            });
        }
    }

    function loadMessages() {
        {% if chat_users.first %}
        $.get('{% url "get_new_messages" user_id=chat_users.first.customer_id %}', function(response) {
            const chatMessages = document.getElementById('adminChatMessages');
            const unreadBadge = document.getElementById('adminUnreadBadge');
            
            if (response.messages && response.messages.length > 0) {
                chatMessages.innerHTML = ''; // Clear existing messages
                response.messages.forEach(function(msg) {
                    const messageHtml = `
                        <div class="message ${msg.is_sender ? 'sent' : 'received'}">
                            ${msg.message}
                            <div class="timestamp">${msg.timestamp}</div>
                        </div>
                    `;
                    chatMessages.insertAdjacentHTML('beforeend', messageHtml);
                });
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
            
            if (response.unread_count > 0) {
                unreadBadge.textContent = response.unread_count;
                unreadBadge.style.display = 'block';
            } else {
                unreadBadge.style.display = 'none';
            }
        });
        {% endif %}
    }

    // Set up periodic message checking for admin chat
    setInterval(loadMessages, 5000);
    </script>

    <!-- Add this JavaScript before the closing body tag -->
    <script>
    $(document).ready(function() {
        // Search functionality
        $('#searchInput').on('keyup', function() {
            var searchText = $(this).val().toLowerCase();
            
            $('.col-sm-12.col-lg-4.col-md-6').each(function() {
                var productName = $(this).find('h5').text().toLowerCase();
                var productDescription = $(this).find('.detail-box p').text().toLowerCase();
                
                if (productName.includes(searchText) || productDescription.includes(searchText)) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        });

        // Search button click handler
        $('#searchButton').on('click', function() {
            var searchText = $('#searchInput').val().toLowerCase();
            
            $('.col-sm-12.col-lg-4.col-md-6').each(function() {
                var productName = $(this).find('h5').text().toLowerCase();
                var productDescription = $(this).find('.detail-box p').text().toLowerCase();
                
                if (productName.includes(searchText) || productDescription.includes(searchText)) {
                    $(this).show();
                } else {
                    $(this).hide();
                }
            });
        });
    });
    </script>
</body>

</html>